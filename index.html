<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <title>PixelEscape | –í—ã–∂–∏–≤–∏ –∏ –¥–æ–±—É–¥—å —Ü–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</title>
  <style>

    body { 
      margin: 0; 
      overflow: hidden; 
      background: #111; 
      font-family: monospace;
      color: #eee;
    }
    
    canvas { 
      display: block; 
      background: #1e1e1e; 
      margin: 0 auto;
      image-rendering: pixelated; 
    }
    
    #debugger {
      position: absolute;
      top: 0; left: 0;
      padding: 6px;
      background: rgba(0,0,0,0.6);
      color: #0f0;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      z-index: 10;
    }
    
    #loadingScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 100;
    }
    
    .loading-bar-container {
      width: 50%;
      height: 20px;
      background-color: #222;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
    }
    
    #loadingBar {
      width: 0%;
      height: 100%;
      background-color: #5c7;
      border-radius: 10px;
      transition: width 0.3s;
    }
    
    .loading-text {
      margin-top: 10px;
      font-size: 14px;
      color: #999;
    }
    
    .game-title {
      font-size: 32px;
      margin-bottom: 20px;
      color: #5c7;
      text-shadow: 0 0 10px rgba(92, 204, 119, 0.5);
    }
    
    #gameUI {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
    }
    
    .ui-button {
      position: absolute;
      padding: 8px 16px;
      background-color: rgba(0, 0, 0, 0.7);
      border: 1px solid #5c7;
      border-radius: 4px;
      color: #5c7;
      cursor: pointer;
      pointer-events: auto;
      font-family: monospace;
    }
    
    #menuButton {
      top: 10px;
      right: 10px;
    }
    
    #inventoryButton {
      bottom: 10px;
      right: 10px;
    }
    
    @media (max-width: 768px) {
      .loading-bar-container {
        width: 80%;
      }
      
      .game-title {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π Canvas –¥–ª—è –∏–≥—Ä—ã -->
  <canvas id="gameCanvas"></canvas>
  
  <!-- –û—Ç–ª–∞–¥—á–∏–∫ -->
  <div id="debugger"></div>
  
  <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
  <div id="gameUI">
    <button id="menuButton" class="ui-button">–ú–µ–Ω—é</button>
    <button id="inventoryButton" class="ui-button">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (Tab)</button>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div id="loadingScreen">
    <h1 class="game-title">PixelEscape</h1>
    <div class="loading-bar-container">
      <div id="loadingBar"></div>
    </div>
    <div id="loadingText" class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</div>
  </div>
  
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏–≥—Ä—ã -->
   
<script type="module">
  // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è
  import { startGame } from './src/main.js';

  // –ñ–¥—ë–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DOM –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
  window.addEventListener('DOMContentLoaded', () => {
    const canvas = document.getElementById('gameCanvas');

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä canvas –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞
    function resizeCanvas() {
      const maxWidth = 1280;
      const maxHeight = 720;

      // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–∞
      const availableWidth = window.innerWidth;
      const availableHeight = window.innerHeight;

      // –í—ã—á–∏—Å–ª—è–µ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω
      const aspectRatio = maxWidth / maxHeight;

      let width, height;

      // –ü–æ–¥–±–∏—Ä–∞–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã canvas
      if (availableWidth / availableHeight > aspectRatio) {
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ
        height = Math.min(maxHeight, availableHeight);
        width = height * aspectRatio;
      } else {
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ —à–∏—Ä–∏–Ω–µ
        width = Math.min(maxWidth, availableWidth);
        height = width / aspectRatio;
      }

      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (–ª–æ–≥–∏–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞)
      canvas.width = maxWidth;
      canvas.height = maxHeight;

      // –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–¥–≥–æ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–¥ —ç–∫—Ä–∞–Ω
      canvas.style.width = `${width}px`;
      canvas.style.height = `${height}px`;
    }

    // –ü–æ–¥–≥–æ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ –æ–∫–Ω–∞
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
    startGame();
  });
</script>
</body>
</html>